<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PastelArte - Confirmar Pago</title>
  <link rel="stylesheet" href="/Pastelarte/ccs/style.css">
  <link rel="stylesheet" href="/Pastelarte/ccs/pago.css">
</head>

<body>

  <header class="header">
    <nav>
      <div class="logo">PastelArte</div>
      <div class="links">
        <a href="index.html" class="activo">Inicio</a>
        <a href="catalogo.html">CatÃ¡logo</a>
        <a href="personalizar.html">Personalizar</a>
        <a href="sobre.html">Sobre Nosotros</a>
        <a href="contacto.html">Contacto</a>
        <a href="admin.html">Administrador</a>
        <a href="carrito.html" class="ver-carrito">ğŸ›’ Carrito</a>
        <a href="perfil.html">Perfil</a>
        <a href="login.html" class="btn-login">Acceder</a>
      </div>
    </nav>
  </header>

  <section class="pago-page">

  <h1>ğŸ’³ Confirmar pago</h1>

  <!-- FORMULARIO DE ENTREGA -->
  <form class="formulario" id="formEntrega">

    <b>ğŸ“ DirecciÃ³n de entrega:</b>

    <label>Ciudad:</label>
    <input type="text" id="ciudad" placeholder="Ej: Cali" required>

    <label>Barrio:</label>
    <input type="text" id="barrio" placeholder="Ej: San Fernando" required>

    <label>DirecciÃ³n exacta:</label>
    <input type="text" id="direccion" placeholder="Ej: Cra 12 #34-56" required>

    <label>Referencia (opcional):</label>
    <input type="text" id="referencia" placeholder="Ej: Casa color beige con reja negra">

    <label>Nombre de quien recibe:</label>
    <input type="text" id="receptor" placeholder="Ej: MarÃ­a PÃ©rez" required>

    <label>TelÃ©fono de contacto:</label>
    <input type="text" id="telefonoEntrega" placeholder="Ej: 3100000000" required>

    <b>MÃ©todo de pago:</b>

    <div class="pago">
      <label>
        <input type="radio" id="pagoEfectivo" name="pago" value="efectivo" onclick="mostrarCampoNequi()">
        Efectivo (contra entrega)
      </label><br>

      <label>
        <input type="radio" id="pagoNequi" name="pago" value="nequi" onclick="mostrarCampoNequi()">
        Nequi ğŸ’œ
      </label>
    </div>

    <div id="nequiCampo" style="display: none; margin-top: 15px;">
      <p>Transfiere tu pago a nuestro Nequi: <strong>312 000 0000</strong></p>

      <img width="20%" height="20%" src="imagen/nequi.png" alt="Pago con Nequi">

      <label>NÃºmero desde el que realizas el pago:</label>
      <input type="text" id="numeroNequi" placeholder="Ej: 3101234567">

      <label>Adjunta comprobante (obligatorio si pagas por Nequi):</label>
      <input type="file" id="comprobante" accept="image/*">
    </div>

  </form>

  <div id="resumen-pago"></div>

  <button class="btn-pagar" onclick="pagar()">Pagar ahora</button>

</section>

  <footer>
    <p>ğŸ“ Cali, Colombia | â˜ï¸ 312 000 0000 | ğŸ’Œ contacto@pastelarte.com</p>
  </footer>

<script>
  function mostrarCampoNequi() {
    const nequiCampo = document.getElementById("nequiCampo");
    const metodoNequi = document.getElementById("pagoNequi");
    nequiCampo.style.display = metodoNequi.checked ? "block" : "none";
  }

  document.addEventListener("DOMContentLoaded", () => {
    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    let total = carrito.reduce((suma, item) => suma + item.precio, 0);

    document.getElementById("resumen-pago").innerHTML = `
      <h2>Total a pagar: <strong>$${total.toLocaleString()}</strong></h2>
      <p>EstÃ¡s pagando los productos aÃ±adidos al carrito ğŸ›’</p>
    `;
  });

  function pagar() {
   
    const ciudad = document.getElementById("ciudad").value.trim();
    const barrio = document.getElementById("barrio").value.trim();
    const direccion = document.getElementById("direccion").value.trim();
    const receptor = document.getElementById("receptor").value.trim();
    const telefono = document.getElementById("telefonoEntrega").value.trim();

    if (!ciudad || !barrio || !direccion || !receptor || !telefono) {
      alert("Por favor completa todos los campos obligatorios de direcciÃ³n.");
      return;
    }

   
    const efectivo = document.getElementById("pagoEfectivo").checked;
    const nequi = document.getElementById("pagoNequi").checked;

    if (!efectivo && !nequi) {
      alert("Por favor selecciona un mÃ©todo de pago.");
      return;
    }

    
    if (nequi) {
      const comprobante = document.getElementById("comprobante").files.length;
      if (comprobante === 0) {
        alert("Debes subir el comprobante de pago por Nequi.");
        return;
      }
    }

    alert("ğŸ‰ Â¡Pago realizado con Ã©xito! Tu pedido estÃ¡ en camino.");

    localStorage.removeItem("carrito");
    window.location.href = "index.html";
  }
</script>


</body>

</html>